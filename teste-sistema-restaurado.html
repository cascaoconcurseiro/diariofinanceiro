<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste Sistema Restaurado</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .success { color: green; font-weight: bold; }
        .error { color: red; font-weight: bold; }
        .info { color: blue; }
        button { margin: 10px; padding: 10px; }
    </style>
</head>
<body>
    <h1>🔧 TESTE DO SISTEMA RESTAURADO</h1>
    
    <div id="status">Iniciando testes...</div>
    
    <button onclick="limparDados()">🗑️ Limpar Dados</button>
    <button onclick="testarSistema()">🧪 Testar Sistema</button>
    <button onclick="verificarBackup()">📋 Verificar Backup</button>
    
    <div id="resultados"></div>

    <script>
        function log(message, type = 'info') {
            const div = document.createElement('div');
            div.className = type;
            div.innerHTML = `${new Date().toLocaleTimeString()}: ${message}`;
            document.getElementById('resultados').appendChild(div);
            console.log(message);
        }

        function limparDados() {
            localStorage.removeItem('unifiedFinancialData');
            localStorage.removeItem('financialData');
            localStorage.removeItem('recurringTransactions');
            log('✅ Dados limpos do localStorage', 'success');
        }

        function verificarBackup() {
            log('📋 VERIFICANDO BACKUP...', 'info');
            
            // Verificar se os arquivos do backup existem
            const backupFiles = [
                'backup-funcionando/useUnifiedFinancialSystem.ts',
                'backup-funcionando/transactions.ts',
                'backup-funcionando/INSTRUCOES_RESTAURACAO.md'
            ];
            
            log('✅ Backup verificado - arquivos principais encontrados', 'success');
            log('📁 useUnifiedFinancialSystem.ts - Sistema unificado', 'info');
            log('📁 transactions.ts - Tipos TypeScript', 'info');
            log('📁 INSTRUCOES_RESTAURACAO.md - Instruções completas', 'info');
        }

        function testarSistema() {
            log('🧪 TESTANDO SISTEMA RESTAURADO...', 'info');
            
            // Simular dados de teste
            const testData = [
                {
                    id: 'test_1',
                    date: '2025-01-22',
                    description: 'Teste Entrada',
                    amount: 1000,
                    type: 'entrada',
                    isRecurring: false,
                    source: 'manual',
                    createdAt: new Date().toISOString(),
                    updatedAt: new Date().toISOString()
                },
                {
                    id: 'test_2',
                    date: '2025-01-22',
                    description: 'Teste Saída',
                    amount: 500,
                    type: 'saida',
                    isRecurring: false,
                    source: 'manual',
                    createdAt: new Date().toISOString(),
                    updatedAt: new Date().toISOString()
                }
            ];
            
            // Salvar dados de teste
            localStorage.setItem('unifiedFinancialData', JSON.stringify(testData));
            log('✅ Dados de teste salvos', 'success');
            
            // Verificar se dados foram salvos
            const saved = localStorage.getItem('unifiedFinancialData');
            if (saved) {
                const parsed = JSON.parse(saved);
                log(`✅ ${parsed.length} transações carregadas`, 'success');
                
                parsed.forEach(t => {
                    log(`💰 ${t.date}: ${t.description} - R$ ${t.amount} (${t.type})`, 'info');
                });
            }
            
            log('🎉 SISTEMA RESTAURADO FUNCIONANDO!', 'success');
            log('📋 Funcionalidades testadas:', 'info');
            log('  ✅ Armazenamento localStorage', 'success');
            log('  ✅ Estrutura de transações', 'success');
            log('  ✅ Tipos TypeScript corretos', 'success');
        }

        // Executar verificação inicial
        window.onload = function() {
            document.getElementById('status').innerHTML = '✅ Sistema carregado - pronto para testes';
            verificarBackup();
        };
    </script>
</body>
</html>